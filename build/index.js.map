{
  "version": 3,
  "file": "index.js",
  "sourceRoot": "../src/",
  "sources": [
    "index.coffee"
  ],
  "names": [],
  "mappings": "AAAA;EAAA;AAAA,MAAA,CAAA,EAAA;;EACA,MAAA,GAAS;;AACT;IACE,MAAA,GAAS,OAAO,CAAC,MAAR,CAAe,KAAf,EADX;GAAA,aAAA;IAEM;IACJ,MAAA,GAAS,OAAO,CAAC,MAAR,CAAe,KAAf,EAAsB,EAAtB,EAHX;;;EAIA,MAAM,CAAC,QAAP,CAAgB,UAAhB,EAA4B,QAAA,CAAA,CAAA;AAC1B,QAAA,SAAA,EAAA,UAAA,EAAA;IAAA,KAAA,GAAQ,CAAA;IACR,SAAA,GACE;MAAA,OAAA,EAAS,EAAT;MACA,SAAA,EAAW;IADX;IAEF,UAAA,GAAa,QAAA,CAAC,IAAD,EAAO,IAAP,CAAA;AACX,UAAA,EAAA,EAAA,CAAA,EAAA,GAAA,EAAA,GAAA,EAAA;AAAA;AAAA;MAAA,KAAA,qCAAA;;qBACE,EAAA,CAAG,IAAH,EAAS,IAAT;MADF,CAAA;;IADW;WAGb;MAAA,IAAA,EAAM,QAAA,CAAC,OAAD,CAAA;AACJ,YAAA,YAAA,EAAA,aAAA,EAAA,eAAA,EAAA,aAAA,EAAA,YAAA,EAAA;QAAA,YAAA,GAAe;QACf,IAAG,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,KAA5B,CAAkC,4BAAlC,CAAH;UACE,YAAA,GAAe,OADjB;;QAEA,aAAA,GAAgB,CAAA,CAAE,YAAF,CAAe,CAAC,SAAhB,CAAA;QAChB,SAAA,GAAY;QACZ,YAAA,GAAe;QACf,eAAA,GAAkB,QAAA,CAAA,CAAA;AAChB,cAAA;UAAA,SAAA,GAAY,CAAA,CAAE,YAAF,CAAe,CAAC,SAAhB,CAAA;UACZ,YAAA,GAAe,OAAO,CAAC;iBACvB,YAAA,GAAe,SAAA,GAAY;QAHX;QAIlB,aAAA,GAAgB,QAAA,CAAC,IAAD,CAAA;AACd,cAAA,UAAA,EAAA,OAAA,EAAA,YAAA,EAAA;UAAA,OAAA,GAAU,IAAI,CAAC,MAAL,CAAA,CAAa,CAAC;UACxB,UAAA,GAAa,OAAA,GAAU,IAAK,CAAA,CAAA,CAAE,CAAC;UAC/B,IAAG,SAAA,GAAY,CAAf;YACE,IAAI,CAAC,QAAL,CAAc,UAAd;YACA,IAAI,CAAC,WAAL,CAAiB,aAAjB;YACA,IAAI,CAAC,WAAL,CAAiB,WAAjB;YACA,IAAG,SAAA,GAAY,aAAf;cACE,IAAI,CAAC,QAAL,CAAc,aAAd,EADF;aAAA,MAAA;cAGE,IAAI,CAAC,QAAL,CAAc,WAAd,EAHF;aAJF;WAAA,MAAA;YASE,IAAI,CAAC,WAAL,CAAiB,UAAjB;YACA,IAAI,CAAC,WAAL,CAAiB,aAAjB;YACA,IAAI,CAAC,WAAL,CAAiB,WAAjB,EAXF;;UAYA,UAAA,GAAa,IAAI,CAAC,QAAL,CAAc,gBAAd;UACb,YAAA,GAAe,IAAI,CAAC,QAAL,CAAc,WAAd;UACf,IAAG,UAAA,GAAa,SAAhB;YACE,IAAI,CAAC,WAAL,CAAiB,kBAAjB;YACA,IAAI,CAAC,WAAL,CAAiB,gBAAjB;YACA,IAAI,CAAC,QAAL,CAAc,WAAd;YACA,IAAI,CAAC,QAAL,CAAc,eAAd;YACA,IAAG,CAAI,YAAP;qBACE,UAAA,CAAW,WAAX,EAAwB,IAAxB,EADF;aALF;WAAA,MAOK,IAAG,OAAA,GAAU,YAAb;YACH,IAAI,CAAC,WAAL,CAAiB,eAAjB;YACA,IAAI,CAAC,WAAL,CAAiB,gBAAjB;YACA,IAAI,CAAC,QAAL,CAAc,WAAd;YACA,IAAI,CAAC,QAAL,CAAc,kBAAd;YACA,IAAG,CAAI,YAAP;qBACE,UAAA,CAAW,WAAX,EAAwB,IAAxB,EADF;aALG;WAAA,MAAA;YAQH,IAAI,CAAC,WAAL,CAAiB,eAAjB;YACA,IAAI,CAAC,WAAL,CAAiB,kBAAjB;YACA,IAAI,CAAC,WAAL,CAAiB,WAAjB;YACA,IAAI,CAAC,QAAL,CAAc,gBAAd;YACA,IAAG,CAAI,UAAP;qBACE,UAAA,CAAW,SAAX,EAAsB,IAAtB,EADF;aAZG;;QAxBS;QAsChB,OAAO,CAAC,gBAAR,CAAyB,QAAzB,EAAmC,QAAA,CAAC,CAAD,CAAA;AACjC,cAAA,IAAA,EAAA;UAAA,eAAA,CAAA;UACA,KAAA,YAAA;YACE,IAAA,GAAO,KAAM,CAAA,GAAA;YACb,aAAA,CAAc,IAAd;UAFF;iBAGA,aAAA,GAAgB;QALiB,CAAnC;eAMA;UAAA,QAAA,EAAU,QAAA,CAAC,EAAD,EAAK,IAAL,CAAA;YACR,IAAI,CAAC,QAAL,CAAc,UAAd;YACA,IAAI,CAAC,QAAL,GAAgB;YAChB,KAAM,CAAA,EAAA,CAAN,GAAY;YACZ,eAAA,CAAA;mBACA,aAAA,CAAc,IAAd;UALQ,CAAV;UAMA,UAAA,EAAY,QAAA,CAAC,EAAD,CAAA;mBACV,OAAO,KAAM,CAAA,EAAA;UADH,CANZ;UAQA,EAAA,EAAI,QAAA,CAAC,IAAD,EAAO,EAAP,CAAA;YACF,IAAG,SAAU,CAAA,IAAA,CAAK,CAAC,OAAhB,CAAwB,EAAxB,CAAA,KAA+B,CAAC,CAAnC;qBACE,SAAU,CAAA,IAAA,CAAK,CAAC,IAAhB,CAAqB,EAArB,EADF;;UADE,CARJ;UAWA,GAAA,EAAK,QAAA,CAAC,IAAD,EAAO,EAAP,CAAA;mBACH,SAAU,CAAA,IAAA,CAAK,CAAC,MAAhB,CAAuB,SAAU,CAAA,IAAA,CAAK,CAAC,OAAhB,CAAwB,EAAxB,CAAvB,EAAoD,CAApD;UADG,CAXL;UAaA,SAAA,EAAW,QAAA,CAAA,CAAA;mBACT,CAAA,CAAE,YAAF,CAAe,CAAC,OAAhB,CACE;cAAA,SAAA,EAAW;YAAX,CADF,EAEE,GAFF;UADS;QAbX;MAvDI;IAAN;EAR0B,CAA5B,CAgFA,CAAC,SAhFD,CAgFW,UAhFX,EAgFuB,QAAA,CAAC,QAAD,CAAA;WACrB;MAAA,QAAA,EAAU,GAAV;MACA,IAAA,EAAM,QAAA,CAAC,KAAD,EAAQ,IAAR,CAAA;AACJ,YAAA,KAAA,EAAA;QAAA,KAAA,GAAQ,QAAA,CAAC,GAAD,CAAA;AACN,cAAA,KAAA,EAAA;UAAA,MAAA,GAAS;UACT,KAAA,GAAQ;AACR,iBAAM,GAAA,EAAN;YACE,MAAA,IAAU,KAAM,CAAA,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,CAAA,CAAA,GAAgB,KAAK,CAAC,MAAjC,CAAA;UADlB;iBAEA;QALM;QAMR,EAAA,GAAK,KAAA,CAAM,EAAN;QACL,QAAQ,CAAC,QAAT,CAAkB,EAAlB,EAAsB,CAAA,CAAE,IAAF,CAAtB;eACA,KAAK,CAAC,GAAN,CAAU,UAAV,EAAsB,QAAA,CAAA,CAAA;iBACpB,QAAQ,CAAC,UAAT,CAAoB,EAApB;QADoB,CAAtB;MATI;IADN;EADqB,CAhFvB;AANA",
  "sourcesContent": [
    "'use strict'\r\nmodule = null\r\ntry\r\n  module = angular.module 'ndx'\r\ncatch e\r\n  module = angular.module 'ndx', []\r\nmodule.provider 'Scroller', ->\r\n  elems = {}\r\n  callbacks =\r\n    visible: []\r\n    offscreen: []\r\n  doCallback = (name, elem) ->\r\n    for fn in callbacks[name]\r\n      fn elem, name\r\n  $get: ($window) ->\r\n    bodySelector = 'html, body'\r\n    if $window.navigator.userAgent.match /(iPod|iPhone|iPad|Android)/\r\n      bodySelector = 'body'\r\n    lastScrollTop = $(bodySelector).scrollTop()\r\n    windowTop = 0\r\n    windowBottom = 0\r\n    calculateWindow = ->\r\n      windowTop = $(bodySelector).scrollTop()\r\n      windowHeight = $window.innerHeight\r\n      windowBottom = windowTop + windowHeight\r\n    calculateElem = (elem) ->\r\n      elemTop = elem.offset().top\r\n      elemBottom = elemTop + elem[0].clientHeight\r\n      if windowTop > 0\r\n        elem.addClass 'scrolled'\r\n        elem.removeClass 'scroll-down'\r\n        elem.removeClass 'scroll-up'\r\n        if windowTop > lastScrollTop\r\n          elem.addClass 'scroll-down'\r\n        else\r\n          elem.addClass 'scroll-up'\r\n      else\r\n        elem.removeClass 'scrolled'\r\n        elem.removeClass 'scroll-down'\r\n        elem.removeClass 'scroll-up'\r\n      wasVisible = elem.hasClass 'scroll-visible'\r\n      wasOffscreen = elem.hasClass 'offscreen'\r\n      if elemBottom < windowTop\r\n        elem.removeClass 'offscreen-bottom'\r\n        elem.removeClass 'scroll-visible'\r\n        elem.addClass 'offscreen'\r\n        elem.addClass 'offscreen-top'\r\n        if not wasOffscreen\r\n          doCallback 'offscreen', elem\r\n      else if elemTop > windowBottom\r\n        elem.removeClass 'offscreen-top'\r\n        elem.removeClass 'scroll-visible'\r\n        elem.addClass 'offscreen'\r\n        elem.addClass 'offscreen-bottom'\r\n        if not wasOffscreen\r\n          doCallback 'offscreen', elem\r\n      else\r\n        elem.removeClass 'offscreen-top'\r\n        elem.removeClass 'offscreen-bottom'\r\n        elem.removeClass 'offscreen'\r\n        elem.addClass 'scroll-visible'\r\n        if not wasVisible\r\n          doCallback 'visible', elem\r\n    $window.addEventListener 'scroll', (e) ->\r\n      calculateWindow()\r\n      for key of elems\r\n        elem = elems[key]\r\n        calculateElem elem\r\n      lastScrollTop = windowTop\r\n    register: (id, elem) ->\r\n      elem.addClass 'scroller'\r\n      elem.scrollId = id\r\n      elems[id] = elem\r\n      calculateWindow()\r\n      calculateElem elem\r\n    unregister: (id) ->\r\n      delete elems[id]\r\n    on: (name, fn) ->\r\n      if callbacks[name].indexOf(fn) is -1\r\n        callbacks[name].push fn\r\n    off: (name, fn) ->\r\n      callbacks[name].splice(callbacks[name].indexOf(fn), 1)\r\n    scrollTop: ->\r\n      $(bodySelector).animate\r\n        scrollTop: 0\r\n      , 400\r\n.directive 'scroller', (Scroller) ->\r\n  restrict: 'A'\r\n  link: (scope, elem) ->\r\n    genId = (num) ->\r\n      output = 'id'\r\n      chars = 'abcdefghijklmnopqrstuvwxyz0123456789'\r\n      while num--\r\n        output += chars[Math.floor(Math.random() * chars.length)]\r\n      output\r\n    id = genId 12\r\n    Scroller.register id, $(elem)\r\n    scope.$on '$destroy', ->\r\n      Scroller.unregister id\r\n"
  ]
}